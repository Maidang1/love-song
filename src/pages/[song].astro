---
import Page from '../layouts/page.astro';
export function getStaticPaths() {
  return [
    {params: {song: 'FallinForYa'}},
  ];
}

const { song } = Astro.params;
import {data} from "../song-data/lyric"
const englishVersion = JSON.stringify(data[song].english).split('\\n');
const chineseVersion = JSON.stringify(data[song].chinese).split('\\n');
const regex = /^\[(\d{2}:\d{2}\.\d{3})\](.*)$/;
const result = {}
englishVersion.forEach((item, index) => {
  const match = item.match(regex)
  if(!match) return
  const [_, time, lyric]= match
  result[time] = {
    ...(result[time] || {}),
    englishVersion:lyric
  }
})

chineseVersion.forEach((item, index) => {
  const match = item.match(regex)
  if(!match) return
  const [_, time, lyric]= match
  result[time] = {
    ...(result[time] || {}),
    chineseVersion:lyric
  }
})
const highLight = data[song].highLight
---
<Page>
  <div class="max-w-3xl mx-auto px-6 py-8" style="font-size: 1rem; max-width: 48rem;">
    {
      Object.keys(result).map(time => {
      return <div class={`py-[0.3em] ${highLight.includes(time) ? 'text-high-light' : ''}`}>
        <p>
          {result[time].englishVersion}
        </p>
        <p>{result[time].chineseVersion}</p>
      </div>
      })
    }
  </div>
</Page>
